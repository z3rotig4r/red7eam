# 프로젝트: 바이러스 제작과 취약점 분석 [모의침투훈련]

이 리포지토리는 C\&C 서버 구축 및 악성코드 제작을 통한 모의 침투 훈련 프로젝트의 개요를 다룹니다. 본 훈련은 APT(지능형 지속 공격) 시나리오를 시뮬레이션하여 실제 사이버 위협에 대한 대응력을 강화하고 탐지 체계를 구축하는 것을 목표로 했습니다.

**참고:** 본 포트폴리오에는 보안 및 기밀 유지를 위해 실제 코드와 상세한 구현 내용은 생략되었습니다.

## 👥 팀원

김민규, 심형주, 조영범, 최승혁, 한승희

## 🛠️ C\&C 서버 아키텍처

C\&C (Command & Control) 서버는 Python Flask, JavaScript, SQLite를 사용하여 구축되었습니다.

## 🌊 악성코드 공격 흐름 및 주요 기능

본 프로젝트에서 개발한 악성코드는 `.hwp` (한글) 파일로 위장한 `.exe` 실행 파일 형태입니다.

### 1\. 초기 감염 및 사용자 기만

사용자가 위장된 `.exe` 파일을 실행하면, 악성코드는 즉시 `.bat` (배치) 파일을 생성하여 관리자 권한으로 백그라운드에서 실행합니다.

동시에 사용자를 속이기 위해, C\&C 서버로부터 **정상적인 HWP 파일을 다운로드하여 실행**합니다. [cite: 72, 76, 83] 사용자는 정상 파일이 열리는 것으로 인지하지만, 백그라운드에서는 악성 스크립트가 동작하게 됩니다.

### 2\. C\&C 통신 및 원격 제어

`.bat` 파일은 VBScript를 C\&C 서버에서 다운로드하여 실행합니다. 이 VBScript는 **무한 루프를 통해 C\&C 서버와 주기적으로 통신**하며 공격자의 명령을 대기합니다.

공격자는 이 통신 채널을 통해 감염된 PC에 OS Command ( `curl`, `schtasks`, 레지스트리 등록 등)를 원격으로 실행하고, 그 결과를 다시 서버로 업로드 받을 수 있습니다.

### 3\. 공격 벡터 1: 파밍 (DNS 스푸핑)

악성코드는 Windows의 DNS 질의 우선순위( `DNS cache` \> `hosts.ics` \> `hosts` \> `DNS Query` )를 악용합니다. [cite: 120, 121, 122]

VBScript를 통해 `hosts.ics` 파일에 특정 정상 사이트의 주소를 공격자의 피싱 사이트 IP로 변조하는 내용을 삽입합니다. 이로 인해 사용자가 정상 사이트로 접속을 시도해도 실제로는 피싱 사이트로 리다이렉션되어 개인정보(ID/Password) 탈취를 시도합니다.

정보 탈취 후, 공격자는 원격 명령으로 `hosts.ics` 파일 내의 피싱 사이트 정보를 삭제하여 흔적을 제거할 수 있습니다.  

### 4\. 공격 벡터 2: 자료 탈취

악성코드는 감염된 PC 내부의 자료를 스캔한 후 C\&C 서버로 업로드하는 기능을 포함합니다. 이때 대용량 통신으로 인한 탐지를 우회하기 위해, **파일을 작은 단위로 분할하여 소량씩 C\&C 서버로 전송**하는 방식을 사용합니다.

## 💻 사용된 기술 및 도구

| 구분 | 기술/도구 |
| :--- | :--- |
| **C\&C 서버** | Python Flask, Js, sqlite |
| **악성코드/스크립트** | Vbscript, OS Command |
| **리버싱/분석** | X32dbg, IDA, resource hacker |
| **네트워크 스캐닝** | nmap, ncat |
| **기타** | Anaconda3 |

## ⚠️ 면책 조항 (Disclaimer)

이 프로젝트는 **오직 교육 및 훈련 목적으로만** 수행되었습니다. 모든 활동은 통제된 시뮬레이션 환경 내에서 이루어졌습니다. 여기에 설명된 코드와 기술은 보안 전문가가 실제 위협을 이해하고 방어하는 데 도움을 주기 위한 것입니다.